generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String      @id @default(uuid())
  first_name         String?
  last_name          String?
  phone_number       String?
  email              String?     @unique
  status             Status      @default(ACTIVE)
  profile_picture    String?
  identity_verified  Boolean     @default(false)
  scanned_id         String?
  created_at         DateTime    @default(now())
  updated_at         DateTime    @default(now())
  reviews            Review[]
  listings           Listing[]
}

enum Status {
  ACTIVE
  INACTIVE
}

model Listing {
  id                   String      @id @default(uuid())
  type_of_listing      ListingType
  address              String
  city                 String
  block                String
  coords               String
  guests               Int
  bedrooms             Int
  beds                 Int
  bathrooms            Int
  regular_amenities    String[]
  photos               String[]
  title                String
  description          String
  square_feet          Int
  price_nightly        Float
  price_weekly         Float
  price_monthly        Float
  deposit              Float
  // reservation_calendar String
  safety_items         String[]
  created_at           DateTime    @default(now())
  updated_at           DateTime    @default(now())
  user_id              String
  reviews              Review[]


  user                 User        @relation(fields: [user_id], references: [id])
}

enum ListingType {
  CHALET
  FARM
  LOUNGE
  TENT
  BARN
}

model Review {
  id          String      @id @default(uuid())
  user_id     String
  listing_id  String
  overall_rating       Float
  cleanliness_rating   Float
  location_rating      Float
  communication_rating Float
  comments    String?


  user        User        @relation(fields: [user_id], references: [id])
  listing     Listing     @relation(fields: [listing_id], references: [id])
}

